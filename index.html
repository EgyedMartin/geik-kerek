<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>G√âIK Ny√≠lt Nap - Kih√≠v√°s</title>
  <style>
    body { font-family: sans-serif; background: #0f172a; color: white; text-align: center; margin: 0; padding: 10px; }
    .container { max-width: 450px; margin: 0 auto; }
    canvas { background: white; border-radius: 50%; margin: 20px 0; max-width: 100%; height: auto; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
    button#spin-btn { background: #22c55e; border: none; padding: 15px 30px; font-size: 18px; font-weight: bold; border-radius: 30px; color: white; cursor: pointer; }
    button:disabled { background: #475569; }
    
    #modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 1000; flex-direction: column; justify-content: center; align-items: center; }
    #question-card { background: #1e293b; padding: 25px; border-radius: 15px; border: 2px solid #38bdf8; width: 85%; max-width: 350px; }
    .options-grid { display: grid; gap: 10px; margin-top: 15px; }
    .option-btn { background: #334155; border: 1px solid #475569; color: white; padding: 12px; border-radius: 8px; font-size: 15px; cursor: pointer; }
    .option-btn:hover { background: #38bdf8; color: #000; }
    .progress { color: #fbbf24; font-weight: bold; margin-bottom: 10px; font-size: 1.1rem; }
  </style>
</head>
<body>

  <div class="container">
    <h2 style="margin-top:10px;">üéì G√âIK Kih√≠v√°s</h2>
    <p>3 k√©rd√©s v√°r r√°d. Gy≈±jts min√©l t√∂bb pontot!</p>
    <canvas id="wheel" width="400" height="400"></canvas>
    <div><button id="spin-btn" onclick="spin()">üé° P√ñRGET√âS</button></div>
    <p id="status" style="color:#38bdf8; font-weight:bold; height: 20px;"></p>
  </div>

  <div id="modal-overlay">
    <div id="question-card">
      <div id="progress" class="progress"></div>
      <p id="m-quest" style="font-size: 18px; font-weight: bold; min-height: 50px;"></p>
      <div class="options-grid" id="m-opts"></div>
    </div>
  </div>

<script>
  const options = ["Logika", "Matek", "Inf√≥", "G√©p√©sz", "Fun", "Extra", "Vill√°m", "Technika"];
  
  // Nyerem√©ny list√°k
  const allPrizes = ["Leh√∫z√≥", "Notesz", "S√∂rbont√≥", "Toll", "Es≈ëkab√°t", "Sz√∂vegkiemel≈ë", "Tornazs√°k"];
  // 2 j√≥ v√°lasz eset√©n: nincs toll, nincs tornazs√°k
  const midPrizes = ["Leh√∫z√≥", "Notesz", "S√∂rbont√≥", "Es≈ëkab√°t", "Sz√∂vegkiemel≈ë"];
  const basicPrizes = ["Toll", "Post-it"];

  const questions = {
    "Logika": [
      { q: "Melyik sz√°m j√∂n: 2, 4, 8, 16... ?", o: ["24", "30", "32", "64"], a: 2 },
      { q: "Melyik nem illik a sorba?", o: ["Eg√©r", "Monitor", "Keny√©rpir√≠t√≥", "RAM"], a: 2 },
      { q: "H√°ny oldala van egy kock√°nak?", o: ["4", "6", "8", "12"], a: 1 }
    ],
    "Matek": [
      { q: "Mennyi 15 x 4?", o: ["50", "60", "70", "45"], a: 1 },
      { q: "Mennyi 144 gy√∂ke?", o: ["12", "14", "11", "10"], a: 0 },
      { q: "Mennyi 2 a tizediken (2^10)?", o: ["512", "1000", "1024", "2048"], a: 2 }
    ],
    "Inf√≥": [
      { q: "Mit jelent a CPU?", o: ["Processzor", "Mem√≥ria", "Monitor", "T√°p"], a: 0 },
      { q: "Melyik programnyelv?", o: ["HTML", "Python", "JPG", "MP3"], a: 1 },
      { q: "H√°ny bit 1 byte?", o: ["4", "8", "16", "32"], a: 1 }
    ],
    "G√©p√©sz": [
      { q: "Melyik f√©m?", o: ["Fa", "M≈±anyag", "Ac√©l", "√úveg"], a: 2 },
      { q: "Mi cs√∂kkenti a s√∫rl√≥d√°st?", o: ["V√≠z", "Ken≈ëolaj", "Por", "Gumi"], a: 1 },
      { q: "Mivel m√©r√ºnk pontosabban?", o: ["Tol√≥m√©r≈ë", "Vonalz√≥", "M√©r≈ëszalag", "Szem"], a: 0 }
    ],
    "Fun": [
      { q: "Mi kell a vizsg√°hoz legink√°bb?", o: ["Szerencse", "K√°v√©", "Tud√°s", "Mindh√°rom"], a: 3 },
      { q: "Hol tal√°lhat√≥ a G√âIK?", o: ["Budapest", "Miskolc", "Debrecen", "Gy≈ër"], a: 1 },
      { q: "Ki a m√©rn√∂khallgat√≥ bar√°tja?", o: ["A h√©tf≈ë", "A k√°v√©automata", "A vizsgadrukk", "Az √ºres h≈±t≈ë"], a: 1 }
    ],
    "Extra": [
      { q: "Mennyi 2^3 + 3^2?", o: ["12", "17", "15", "18"], a: 1 },
      { q: "Mi a p√≠ (œÄ) kerek√≠tett √©rt√©ke?", o: ["3,12", "3,14", "3,16", "3,10"], a: 1 },
      { q: "Pr√≠msz√°m-e a 29?", o: ["Igen", "Nem", "Csak p√°ratlan napokon", "Nem tudom"], a: 0 }
    ],
    "Vill√°m": [
      { q: "Mi a v√≠z vegyjele?", o: ["HO2", "H2O", "O2", "H2"], a: 1 },
      { q: "Miskolci Egyetem sz√≠ne?", o: ["Z√∂ld", "Piros", "K√©k-feh√©r", "S√°rga"], a: 2 },
      { q: "H√°ny bites egy IP c√≠m (IPv4)?", o: ["16", "32", "64", "128"], a: 1 }
    ],
    "Technika": [
      { q: "Mivel m√©r√ºnk ampert?", o: ["Voltm√©r≈ë", "Amperm√©r≈ë", "H≈ëm√©r≈ë", "M√©rleg"], a: 1 },
      { q: "Mi az USB?", o: ["Universal Serial Bus", "Unit Base", "Ultra Speed", "User Board"], a: 0 },
      { q: "H√°ny ker√©k van egy aut√≥n?", o: ["2", "3", "4", "5"], a: 2 }
    ]
  };

  const canvas = document.getElementById("wheel");
  const ctx = canvas.getContext("2d");
  const spinBtn = document.getElementById("spin-btn");
  let angle = 0;
  let spinning = false;
  let currentStep = 0;
  let correctCount = 0;
  let currentCat = "";

  function draw() {
    const slice = (Math.PI * 2) / options.length;
    ctx.clearRect(0, 0, 400, 400);
    options.forEach((text, i) => {
      ctx.beginPath();
      ctx.moveTo(200, 200);
      ctx.arc(200, 200, 190, angle + i * slice, angle + (i + 1) * slice);
      ctx.fillStyle = i % 2 === 0 ? "#38bdf8" : "#fbbf24";
      ctx.fill();
      ctx.stroke();
      ctx.save();
      ctx.translate(200, 200);
      ctx.rotate(angle + i * slice + slice / 2);
      ctx.fillStyle = "#000";
      ctx.font = "bold 14px Arial";
      ctx.fillText(text, 100, 5);
      ctx.restore();
    });
    ctx.fillStyle = "red";
    ctx.beginPath();
    ctx.moveTo(185, 10); ctx.lineTo(215, 10); ctx.lineTo(200, 40);
    ctx.fill();
  }

  function spin() {
    if (spinning) return;
    spinning = true;
    spinBtn.disabled = true;
    correctCount = 0;
    currentStep = 0;
    document.getElementById("status").innerText = "P√∂rg√©s...";
    let speed = Math.random() * 0.3 + 0.35;
    function anim() {
      angle += speed;
      speed *= 0.985;
      draw();
      if (speed > 0.002) requestAnimationFrame(anim);
      else {
        spinning = false;
        setTimeout(startChallenge, 500);
      }
    }
    anim();
  }

  function startChallenge() {
    const slice = (Math.PI * 2) / options.length;
    const norm = (1.5 * Math.PI - angle) % (Math.PI * 2);
    const idx = Math.floor((norm < 0 ? norm + Math.PI * 2 : norm) / slice);
    currentCat = options[idx];
    document.getElementById("status").innerText = "Kateg√≥ria: " + currentCat;
    document.getElementById("modal-overlay").style.display = "flex";
    showQuestion();
  }

  function showQuestion() {
    const qData = questions[currentCat][currentStep];
    document.getElementById("progress").innerText = "K√©rd√©s: " + (currentStep + 1) + " / 3 (" + correctCount + " j√≥)";
    document.getElementById("m-quest").innerText = qData.q;
    const container = document.getElementById("m-opts");
    container.innerHTML = "";
    
    qData.o.forEach((opt, i) => {
      const btn = document.createElement("button");
      btn.className = "option-btn";
      btn.innerText = opt;
      btn.onclick = () => {
        if (i === qData.a) correctCount++;
        currentStep++;
        if (currentStep < 3) showQuestion();
        else evaluateResult();
      };
      container.appendChild(btn);
    });
  }

  function evaluateResult() {
    const container = document.getElementById("m-opts");
    const qText = document.getElementById("m-quest");
    const progText = document.getElementById("progress");
    container.innerHTML = "";
    progText.innerText = "V√©geredm√©ny: 3 / " + correctCount + " helyes";

    if (correctCount === 3) {
      qText.innerText = "T√∂k√©letes! V√°lassz b√°rmit a list√°r√≥l:";
      allPrizes.forEach(p => createPrizeBtn(p, container));
    } 
    else if (correctCount === 2) {
      // Itt a midPrizes-b√≥l sorsolunk (nincs toll, nincs tornazs√°k)
      const randomPrize = midPrizes[Math.floor(Math.random() * midPrizes.length)];
      qText.innerText = "Sz√©p munka! A v√©letlenszer≈± nyerem√©nyed:";
      createPrizeBtn(randomPrize, container, true);
    } 
    else if (correctCount === 1) {
      qText.innerText = "V√°lassz a vigaszd√≠jak k√∂z√ºl:";
      basicPrizes.forEach(p => createPrizeBtn(p, container));
    } 
    else {
      qText.innerText = "Sajnos most nem siker√ºlt j√≥ v√°laszt adnod.";
      createPrizeBtn("Vissza a p√∂rget√©shez", container, false, true);
    }
  }

  function createPrizeBtn(prize, container, isFinal = false, isReset = false) {
    const btn = document.createElement("button");
    btn.className = "option-btn";
    if (!isReset) btn.style.background = "#22c55e";
    btn.innerText = prize;
    btn.onclick = () => {
      if (!isReset) alert("Gratul√°lunk! Nyerem√©nyed: " + prize);
      document.getElementById("modal-overlay").style.display = "none";
      spinBtn.disabled = false;
      document.getElementById("status").innerText = "";
    };
    container.appendChild(btn);
  }

  window.onload = draw;
</script>
</body>
</html>
