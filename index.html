<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>G√âIK Ny√≠lt Nap ‚Äì Szerencseker√©k</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0f172a, #1e293b);
      color: white;
      text-align: center;
      padding: 20px;
      margin: 0;
      overflow-x: hidden;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
    }

    canvas {
      background: white;
      border-radius: 50%;
      box-shadow: 0 10px 40px rgba(0,0,0,0.6);
      margin: 20px 0;
      max-width: 100%;
    }

    button#spin-btn {
      background: #22c55e;
      border: none;
      padding: 16px 32px;
      font-size: 20px;
      font-weight: bold;
      border-radius: 50px;
      cursor: pointer;
      transition: 0.3s;
      color: white;
      box-shadow: 0 4px 15px rgba(34, 197, 94, 0.4);
    }

    button#spin-btn:hover {
      background: #16a34a;
      transform: scale(1.05);
    }

    button#spin-btn:disabled {
      background: #475569;
      cursor: not-allowed;
    }

    /* Modal (K√©rd√©s ablak) st√≠lusok */
    #modal-overlay {
      display: none;
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.85);
      backdrop-filter: blur(5px);
      justify-content: center;
      align-items: center;
      z-index: 100;
    }

    #question-card {
      background: #1e293b;
      padding: 30px;
      border-radius: 20px;
      border: 2px solid #38bdf8;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 0 30px rgba(56, 189, 248, 0.3);
    }

    .options-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 20px;
    }

    .option-btn {
      background: #334155;
      border: 1px solid #475569;
      color: white;
      padding: 12px;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.2s;
      font-size: 16px;
    }

    .option-btn:hover {
      background: #38bdf8;
      color: #0f172a;
      font-weight: bold;
    }

    footer {
      opacity: 0.6;
      font-size: 14px;
      margin-top: 40px;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>üéì G√âIK Ny√≠lt Nap</h1>
    <p>P√∂rgess √©s v√°laszolj helyesen a <b>f≈ënyerem√©ny√©rt!</b></p>

    <canvas id="wheel" width="400" height="400"></canvas>

    <div>
      <button id="spin-btn" onclick="spin()">üé° P√ñRGET√âS</button>
    </div>

    <div id="result-text" style="margin-top:20px; font-size: 1.2rem; color: #38bdf8; height: 30px;"></div>

    <footer>
      Miskolci Egyetem - G√©p√©szm√©rn√∂ki √©s Informatikai Kar
    </footer>
  </div>

  <div id="modal-overlay">
    <div id="question-card">
      <h3 id="modal-category" style="color: #fbbf24; margin-top: 0;">Kateg√≥ria</h3>
      <p id="modal-question" style="font-size: 18px; line-height: 1.5;">K√©rd√©s sz√∂vege?</p>
      <div class="options-grid" id="options-container">
        </div>
    </div>
  </div>

<script>
  const options = [
    "üß† Logika", "‚ûï Matek", "üíª Inf√≥", "‚öôÔ∏è G√©p√©sz", 
    "üòÑ Fun", "üî• Extra", "‚ö° Vill√°m", "üéÅ Szerencse"
  ];

  const questions = {
    "üß† Logika": [
      { q: "Melyik sz√°m hi√°nyzik? 3 ‚Äì 6 ‚Äì 12 ‚Äì 24 ‚Äì ?", o: ["36", "48", "42", "60"], a: 1 },
      { q: "Melyik nem illik a sorba?", o: ["Eg√©r", "Monitor", "Keny√©rpir√≠t√≥", "Billenty≈±zet"], a: 2 }
    ],
    "‚ûï Matek": [
      { q: "Mennyi 12 √ó 5?", o: ["50", "60", "70", "55"], a: 1 },
      { q: "Mennyi 2 az √∂t√∂diken (2‚Åµ)?", o: ["16", "32", "64", "10"], a: 1 }
    ],
    "üíª Inf√≥": [
      { q: "Mit jelent a CPU?", o: ["Central Processing Unit", "Control Power Unit", "Computer Personal User", "Core Print Utility"], a: 0 },
      { q: "Melyik egy programoz√°si nyelv?", o: ["HTML", "JSON", "Python", "HTTP"], a: 2 }
    ],
    "‚öôÔ∏è G√©p√©sz": [
      { q: "Melyik anyagnak legnagyobb a szak√≠t√≥szil√°rds√°ga?", o: ["Fa", "R√©z", "Ac√©l", "√ìlom"], a: 2 },
      { q: "Mire val√≥ a ken√©s a g√©pekben?", o: ["H≈±t√©sre", "S√∫rl√≥d√°s cs√∂kkent√©s√©re", "Tiszt√≠t√°sra", "D√≠sz√≠t√©sre"], a: 1 }
    ],
    "üòÑ Fun": [
      { q: "Ki a m√©rn√∂k√∂k legjobb bar√°tja?", o: ["A k√°v√©", "A vizsgaszab√°lyzat", "A h√©tf≈ë reggel", "Az √ºres h≈±t≈ë"], a: 0 },
      { q: "Mikor fekszik le egy informatikus?", o: ["Este 10-kor", "Amikor elfogy a k√≥d", "Napfelkeltekor", "Sosem"], a: 2 }
    ],
    "üî• Extra": [
      { q: "Mennyi a 2¬≥ + 3¬≤?", o: ["12", "15", "17", "21"], a: 2 },
      { q: "Melyik pr√≠msz√°m?", o: ["21", "27", "29", "33"], a: 2 }
    ],
    "‚ö° Vill√°m": [
      { q: "H√°ny bites egy b√°jt (byte)?", o: ["4", "8", "16", "32"], a: 1 }
    ]
  };

  const canvas = document.getElementById("wheel");
  const ctx = canvas.getContext("2d");
  const spinBtn = document.getElementById("spin-btn");
  const center = canvas.width / 2;
  const radius = center - 15;
  let angle = 0;
  let spinning = false;

  function drawWheel() {
    const slice = (2 * Math.PI) / options.length;
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    options.forEach((text, i) => {
      const start = angle + i * slice;
      const end = start + slice;

      ctx.beginPath();
      ctx.moveTo(center, center);
      ctx.arc(center, center, radius, start, end);
      ctx.fillStyle = i % 2 === 0 ? "#38bdf8" : "#fbbf24";
      ctx.fill();
      ctx.strokeStyle = "#1e293b";
      ctx.lineWidth = 2;
      ctx.stroke();

      ctx.save();
      ctx.translate(center, center);
      ctx.rotate(start + slice / 2);
      ctx.textAlign = "right";
      ctx.fillStyle = "#000";
      ctx.font = "bold 14px sans-serif";
      ctx.fillText(text, radius - 15, 5);
      ctx.restore();
    });

    // Fix ny√≠l (fel√ºl)
    ctx.fillStyle = "#ef4444";
    ctx.beginPath();
    ctx.moveTo(center - 15, 10);
    ctx.lineTo(center + 15, 10);
    ctx.lineTo(center, 40);
    ctx.fill();
  }

  function spin() {
    if (spinning) return;
    spinning = true;
    spinBtn.disabled = true;
    document.getElementById("result-text").innerText = "P√∂rg√©s...";

    let speed = Math.random() * 0.4 + 0.3;
    let decay = 0.985;

    function animate() {
      angle += speed;
      speed *= decay;
      drawWheel();

      if (speed > 0.002) {
        requestAnimationFrame(animate);
      } else {
        spinning = false;
        setTimeout(showResult, 500);
      }
    }
    animate();
  }

  function showResult() {
    const slice = (2 * Math.PI) / options.length;
    // A ny√≠l fel√ºl van, √≠gy a sz√°m√≠t√°s:
    const normalizedAngle = (1.5 * Math.PI - angle) % (2 * Math.PI);
    const index = Math.floor((normalizedAngle < 0 ? normalizedAngle + 2 * Math.PI : normalizedAngle) / slice);
    const category = options[index];

    document.getElementById("result-text").innerText = "Kateg√≥ria: " + category;

    if (category === "üéÅ Szerencse") {
      showFinalMessage(true, "A szerencse mell√©d √°llt! Automatikusan nyert√©l egy tornazs√°kot!");
      return;
    }

    const list = questions[category];
    const qData = list[Math.floor(Math.random() * list.length)];
    
    openModal(category, qData);
  }

  function openModal(cat, data) {
    const overlay = document.getElementById("modal-overlay");
    const catTitle = document.getElementById("modal-category");
    const qText = document.getElementById("modal-question");
    const optContainer = document.getElementById("options-container");

    catTitle.innerText = cat;
    qText.innerText = data.q;
    optContainer.innerHTML = "";

    data.o.forEach((opt, i) => {
      const btn = document.createElement("button");
      btn.className = "option-btn";
      btn.innerText = opt;
      btn.onclick = () => {
        overlay.style.display = "none";
        if (i === data.a) {
          showFinalMessage(true, "Gratul√°lunk! Helyes v√°lasz!");
        } else {
          showFinalMessage(false, "Sajnos nem tal√°lt.");
        }
      };
      optContainer.appendChild(btn);
    });

    overlay.style.display = "flex";
  }

  function showFinalMessage(isCorrect, msg) {
    if (isCorrect) {
      alert("‚úÖ " + msg + "\n\nNyerem√©nyed: Egy tornazs√°k tele cuccokkal! üéí");
    } else {
      alert("‚ùå " + msg + "\n\nNyerem√©nyed: Egy G√âIK-es toll! üñäÔ∏è");
    }
    spinBtn.disabled = false;
    document.getElementById("result-text").innerText = "";
  }

  drawWheel();
</script>

</body>
</html>
